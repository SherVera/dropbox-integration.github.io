"use strict";(self["webpackChunkdropbox_front"]=self["webpackChunkdropbox_front"]||[]).push([[916],{1916:(e,l,t)=>{t.r(l),t.d(l,{default:()=>T});t(5363);var a=t(3673),s=t(2323);const o={class:"row"},n=(0,a._)("div",{class:"col-md-9"},[(0,a._)("div",{class:"text-h4"},[(0,a._)("b",null,"Lista de Archivos")])],-1),r={class:"col-md-3",style:{"text-align":"right"}},i=(0,a.Uk)(" Descargar "),d=(0,a.Uk)(" Pantalla completa "),c={class:"q-pa-sm"},u=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",{class:"text-center",style:{width:"1vw"}},"Tipo"),(0,a._)("th",{class:"text-left"},"Nombre de archivo"),(0,a._)("th",{class:"text-left"},"Ubicacion")])],-1),p=["onClick"],m={class:"text-center"},w={class:"text-left"},_={class:"text-left"},f={key:0,style:{"text-align":"center"}},g=(0,a._)("td",{class:"text-center"},"No hay registros para mostrar",-1),h=[g];function b(e,l,t,g,b,y){const v=(0,a.up)("q-tooltip"),k=(0,a.up)("q-btn"),q=(0,a.up)("q-card-section"),x=(0,a.up)("q-card"),H=(0,a.up)("q-icon"),C=(0,a.up)("q-markup-table"),Z=(0,a.up)("q-separator"),Q=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(Q,null,{default:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a.Wm)(x,{flat:"",class:"text-primary"},{default:(0,a.w5)((()=>[(0,a.Wm)(q,null,{default:(0,a.w5)((()=>[(0,a._)("div",o,[n,(0,a._)("div",r,[g.selected.length?((0,a.wg)(),(0,a.j4)(k,{key:0,class:"q-ml-sm",round:"",onClick:l[0]||(l[0]=l=>e.$q.fullscreen.toggle()),icon:"download",color:"primary",size:"md"},{default:(0,a.w5)((()=>[(0,a.Wm)(v,null,{default:(0,a.w5)((()=>[i])),_:1})])),_:1})):(0,a.kq)("",!0),(0,a.Wm)(k,{class:"q-ml-sm",round:"",onClick:l[1]||(l[1]=l=>e.$q.fullscreen.toggle()),icon:e.$q.fullscreen.isActive?"fullscreen_exit":"fullscreen",color:"primary",size:"md"},{default:(0,a.w5)((()=>[(0,a.Wm)(v,null,{default:(0,a.w5)((()=>[d])),_:1})])),_:1},8,["icon"])])])])),_:1})])),_:1}),(0,a._)("div",c,[(0,a.Wm)(C,{dense:"",flat:"",bordered:""},{default:(0,a.w5)((()=>[u,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(g.data.records,((e,l)=>((0,a.wg)(),(0,a.iD)("tr",{key:l,style:{cursor:"pointer"},onClick:l=>g.selectFile(e)},[(0,a._)("td",m,[(0,a.Wm)(H,{name:""+("folder"===e[".tag"]?"folder":"download"),size:"sm"},null,8,["name"])]),(0,a._)("td",w,(0,s.zw)(e.name),1),(0,a._)("td",_,(0,s.zw)(e.path_display.replace(`/${e.name}`,"")),1)],8,p)))),128)),g.data.records.length?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("tr",f,h))])])),_:1}),(0,a.Wm)(Z,{color:"grey-4"})])])])),_:1})}t(71),t(7965),t(2799);var y=t(8825),v=t(1959),k=t(9582),q=t(9307);const x=[{name:"name",required:!0,label:"Name",align:"left",field:"name",sortable:!0}],H=[{label:"Nuevo",icon:"add",color:"primary",action:"",permission:"2.2"}],C={setup(){(0,k.yj)();const e=(0,y.Z)(),l=(0,v.qj)({records:[]}),t=(0,v.iH)([]),s=(0,v.iH)({sortBy:"desc",descending:!1,page:1,rowsPerPage:3,rowsNumber:10}),o=(0,v.iH)(1),n=(0,v.iH)(""),r=(0,v.iH)(""),i=(0,v.iH)(!1),d=(0,v.iH)([]),c=(0,v.iH)(!1),u=(0,v.iH)({path:"",recursive:!0,include_deleted:!1,include_has_explicit_shared_members:!1,include_mounted_folders:!1,limit:1e3,include_non_downloadable_files:!1}),p=async()=>{e.loading.show({message:"Buscando..."});const{result:t}=await q.api.post("files/list_folder",u.value);e.loading.hide(),l.records=t.entries},m=async(l,t)=>{e.loading.show({message:"Descargando..."});const a=await q.api.post("files/download/zip",{path:l},{responseType:"blob"}),s=window.URL.createObjectURL(new Blob([a])),o=document.createElement("a");o.href=s,o.setAttribute("download",`${t}.zip`),document.body.appendChild(o),o.click(),e.loading.hide()},w=async(l,t)=>{e.loading.show({message:"Descargando..."});const a=await q.api.post("files/download",{path:l},{responseType:"blob"}),s=window.URL.createObjectURL(new Blob([a])),o=document.createElement("a");o.href=s,o.setAttribute("download",t),document.body.appendChild(o),o.click(),e.loading.hide()},_=e=>{"file"===e[".tag"]?w(e.path_lower,e.name):"folder"===e[".tag"]&&m(e.path_lower,e.name)};return(0,a.bv)((()=>{p()})),{check1:t,data:l,getFilesListFolder:p,selected:d,selectedAll:c,filter:r,loading:i,pagination:s,cols:x,buttons:H,text:n,current:o,response:(0,v.iH)({lastPage:1}),clearSearch:()=>{n.value="",p()},selectAll:e=>{d.value=[],c.value=e,e&&l.records.forEach((e=>{d.value.push(e.id)}))},listen:e=>{},selectFile:_}}};var Z=t(4260),Q=t(4379),W=t(151),z=t(5589),U=t(2452),j=t(3300),A=t(481),D=t(4554),L=t(5869),B=t(7518),N=t.n(B);const P=(0,Z.Z)(C,[["render",b]]),T=P;N()(C,"components",{QPage:Q.Z,QCard:W.Z,QCardSection:z.Z,QBtn:U.Z,QTooltip:j.Z,QMarkupTable:A.Z,QIcon:D.Z,QSeparator:L.Z})}}]);